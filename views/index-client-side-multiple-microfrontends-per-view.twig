{% extends 'layout.twig' %} {% block head_assets %}
<meta name="importmap-type" content="systemjs-importmap" />
<script type="systemjs-importmap">
  {
    "imports": {
      "carts": "http://localhost:3000/javascripts/carts.js",
      "catalogue": "http://localhost:3000/javascripts/catalogue.js",
      "single-spa": "https://cdnjs.cloudflare.com/ajax/libs/single-spa/5.5.3/system/single-spa.min.js"
    }
  }
</script>

<link
  rel="preload"
  href="https://cdnjs.cloudflare.com/ajax/libs/single-spa/5.5.3/system/single-spa.min.js"
  as="script"
  crossorigin="anonymous"
/>

<script src="https://unpkg.com/import-map-overrides@1.15.1/dist/import-map-overrides.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/systemjs/6.1.1/system.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/systemjs/6.1.1/extras/amd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/systemjs/6.1.1/extras/named-exports.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/systemjs/6.1.1/extras/named-register.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/systemjs/6.1.1/extras/use-default.min.js"></script>
{% endblock %} {% block body %}
<div>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" href="#">Socks Shop</a>
    <button
      class="navbar-toggler"
      type="button"
      data-toggle="collapse"
      data-target="#navbarSupportedContent"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item dropdown" id="user"></li>
        <li class="nav-item dropdown" id="carts"></li>
      </ul>
    </div>
  </nav>

  <div class="container pt-2" id="catalogue"></div>
</div>
{% endblock %} {% block scripts %}
<script>
  System.import('single-spa').then(function (singleSpa) {
    singleSpa.registerApplication(
      'catalogue',
      () => System.import('catalogue'),
      (location) => true
    );

    singleSpa.registerApplication(
      'carts',
      () => System.import('carts'),
      (location) => true
    );

    singleSpa.start();
  });
</script>
<import-map-overrides-full></import-map-overrides-full>
{% endblock %}
